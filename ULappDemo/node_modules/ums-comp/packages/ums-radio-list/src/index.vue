<template>
    <div class="wrapper">
        <div class="cell" v-for="(option,index) in options">
            <div class="select-item" :class="[alignRight?'dir-reverse':'']"  @click="clickBtn(index,$event)">
                <ums-radio class="circle-button" :checked="option.checked" :disable="option.disable" ></ums-radio>
                <text class="item" :value="option.label"></text>
            </div>
        </div>
    </div>
</template>

<script>
    var animation = weex.requireModule('animation');
    var modal = weex.requireModule('modal');
    export default{
        name:"ums-radio-list",
        data(){
            return {
                flagArr:[],
                selectIndex:-1,
                flag:false,
                bfindex:-1,
                animatable:true
            }
        },
        components:{
            umsRadio:require('./radio.vue')
        },
        props:{
            options:{
                type: Array,
                default:function(){
                    return [
                        {
                            label:'选项1',
                            value:'选中第一个',
                            disable:false,
                            checked:false
                        },
                        {
                            label:'选项2',
                            value:'选中第二个',
                            disable:false,
                            checked:false
                        },
                        {
                            label:'选项3',
                            value:'选中第三个',
                            disable:true,
                            checked:false
                        },
                        {
                            label:'选项3',
                            value:'选中第三个',
                            disable:true,
                            checked:true
                        }
                    ]
                }
            },
            'align-right':{
                type: Boolean,
                default: false
            },
        },
        mounted(){
            for(let i in this.options){
                console.log(i);
                if(this.options[i].checked && !this.options[i].disable){
                    this.selectIndex = i;
                    console.log("this.selectIndex: "+this.selectIndex)
                }
            }
        },
        methods:{
            clickBtn(index,event){
                let str='';
                if(this.options[index].disable || this.selectIndex == index){
                    return;
                }
                if (this.selectIndex != -1){
                    this.options[this.selectIndex].checked =  ! this.options[this.selectIndex].checked
                }
                str = this.options[index].value
                this.$emit('radioListener',str);
                this.options[index].checked = !this.options[index].checked;
                this.selectIndex = index;
            }
        },
    }
</script>

<style lang="stylus" rel="stylesheet/stylus" scoped>
    @import '../../../src/styles/var'
    .wrapper
        padding-left: 40px
        border-top-width: 1px
        border-bottom-width: 1px
        border-color: $radio-list-border
    .cell
        border-bottom-color: $radio-list-disable
        border-bottom-width: 1px
    .select-item
        flex-direction: row
        height: 122px
        align-items: center
        padding-right: 54px
    .circle-button
        margin-left: 40px
    .item
        font-size: 48px
        margin-left: 32px
        line-height: 122px
    .dir-reverse
        flex-direction: row-reverse
        justify-content: space-between
</style>