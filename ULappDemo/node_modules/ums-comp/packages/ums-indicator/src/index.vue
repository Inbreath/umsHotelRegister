<template>
    <div append="tree">
        <div class="UmsIndicator"  v-if="show">
            <ums-overlayer
                :show="hasOverlayer"
                :overlayerOpacity="hasOverlayer ? overlayerOpacity : 0"
                :hasAnimation='overLayerHasAnimation'
                @overlayerClick="indicatorClose"
                @overlayerAppearFinish="displayIndicator"
            ></ums-overlayer>
            <div class="content" :style={width}>
                <ums-spinner 
                    :type="spinnerType"
                    spinnerColor="#FFF"
                    snakeGapColor="#000"
                    class="spinner"
                    size="65px"
                    thickness="5px">
                </ums-spinner>
                <text :style="textStyle">
                    <slot>{{text}}</slot>
                </text>
            </div>
        </div>
    </div>
</template>

<script>
    import UmsOverlayer from '../../ums-overlayer/index.js'
    import UmsSpinner from '../../ums-spinner/index.js'
    export default {
        data () {
            return {
                overlayer: false
            }
        },
        props: {
            // 显示indicator
            show: {
                type: Boolean,
                default: true
            },
            // 是否显示遮罩
            hasOverlayer: {
                type: Boolean,
                default: true
            },
            // overlayer的透明度
            overlayerOpacity:{
                type: [Number, String],
                default: 0
            },
            // overlayer显示带有动画
            overlayerHasAnimation: {
                type: Boolean,
                default: true
            },
            // spinner的类型有：snake fading-circle double-bounce triple-bounce
            spinnerType: {
                type: String,
                default: 'snake'
            },
            // 显示的文字
            text: {
                type: String,
                default: ''
            },
            width: {
                type: [String, Number],
                default: ''
            },
            fontSize: {
                type: [String, Number],
                default: '36px'
            },
            fontColor: {
                type: String,
                default: '#FFF'
            }
        },
        components: {
            UmsOverlayer,
            UmsSpinner
        },
        computed: {
            textStyle () {
                let {fontColor, fontSize} = this
                return {
                    color: fontColor,
                    fontSize:fontSize,
                    textAlign: 'center'
                }
            }
        },
        methods: {
            indicatorClose () {
                // 关闭indicator
            },
            displayIndicator () {
                // overlayer出现显示完成后调用indicator的显示函数
            }
        }
    }
</script>

<style lang='stylus' rel="stylesheet/stylus" scoped>
    .UmsIndicator
        justify-content: center;
        align-items: center
        position: fixed
        top:0
        left: 0
        right: 0
        bottom: 0
    .content
        border-radius 8px
        opacity 0.6
        background-color #000
        justify-content center
        align-items center
        padding: 16px
    .spinner
        margin-bottom 16px
</style>