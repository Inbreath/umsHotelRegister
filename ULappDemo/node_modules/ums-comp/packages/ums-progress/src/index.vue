<template>
    <div class="body">
        <slot name="start"></slot>
        <div class="wrap" :style="[commonStyle,wrapStyle]" ref="pro">
            <div :style="[commonStyle,grow,progress]"></div>
        </div>
        <slot name="end"></slot>
    </div>
</template>

<script>
    export default{
        name:'ums-progress',
        data(){
            return {
                grow:{
                    width:"0px"
                },
                barTotal:0
            }
        },
        props:{
            barHeight:{
                type:[String,Number],
                default:"10px"
            },
            barWidth:{
                type:[String,Number],
                default:"600px"
            },
            color:{
                type:String,
                default:"#26a2ff"
            },
            value:{
                type:[String,Number],
                default:50
            },
        },
        computed:{
            commonStyle(){
                let styles = {};
                styles['height'] = parseInt(this.barHeight)+"px";
                return styles;
            },
            progress(){
                let styles = {};
                styles['backgroundColor'] = this.color;
                return styles;
            },
            wrapStyle(){
                let styles = {};
                styles['width'] = parseInt(this.barWidth)+"px";
                return styles;
            }
        },
        mounted(){
            this.barTotal = parseInt(this.$refs.pro.style.width);
            this.grow['width'] = this.calWidth(this.value);
            console.log(this.grow['width']);
        },
        watch:{
            value(newVal){
                this.grow['width'] = this.calWidth(newVal);
            }
        },
        methods:{
            calWidth(val){
                console.log(val);
                return parseInt(val)/100*this.barTotal+"px";
            }
        }
    }
</script>

<style lang='stylus' rel="stylesheet/stylus" scoped>
    @import '../../../src/styles/var'
    .body
        flex-direction: row
        align-items center
    .wrap
        margin-left: 10px
        margin-right: 10px
        background-color: $progress-background-color
        flex-direction column
        justify-content: center
        align-items: flex-start
        overflow: hidden
</style>